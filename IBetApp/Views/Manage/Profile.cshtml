@model IBetApp.Models.UserInfoViewModel

@{
    ViewBag.Title = "My profile";
}

<h2>My profile</h2>

<div>
    <hr />
    <div class="col-md-5">
        <img src=@String.Format("/Content/Images/{0}", Model.ImageName) class="avatar avatar-large" />
        <br />
        <br />
        @if (ViewBag.AreFriend == "false")
        {
            @Ajax.ActionLink("Add to friends", "AddFriend", "Manage", new { userId = Model.Id }, new AjaxOptions { HttpMethod = "POST" }, new { @class = "btn btn-default" })
        }
        else if (ViewBag.AreFriend == "true")
        {
            @Ajax.ActionLink("Remove from friends", "RemoveFriend", "Manage", new { userId = Model.Id }, new AjaxOptions { HttpMethod = "POST" }, new { @class = "btn btn-default" })
        }

    </div>
    <div class="col-md-7">
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.UserName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.UserName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Email)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Email)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.FirstName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.FirstName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.LastName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.LastName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Age)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Age)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.City)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.City)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Country)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Country)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.MoneyLeft)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.MoneyLeft)
            </dd>

        </dl>
        <br />
        <hr />
        <br />

        <div class="user-news">
            @foreach (var item in Model.News)
            {
                <div class="col-md-12 clear-float">
                    <h3>@item.Name</h3>
                    <h5>@item.PublishDate.ToShortDateString()</h5>
                    <div class="clear-float">
                        <div class="col-md-3 foat-left">
                            <img src=@item.PhotoName class="avatar-medium" />
                        </div>
                        <div class="col-md-6 foat-left">
                            @item.Description.Replace("\\r\\n", "\r\n");
                        </div>
                        <div class="col-md-3 foat-left" id="@item.Id">
                            @*
                                TODO likes dislikes
                                <div class="like"><span class="glyphicon glyphicon-thumbs-up"> @item.LikesCount</span></div>
                            <div class="dislike"><span class="glyphicon glyphicon-thumbs-down"> @item.DislikesCount</span></div>*@
                        </div>
                    </div>
                    <br />
                    <br />
                    <br />
                    <br />
                    <br /></div>
            }
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>

<script type="text/javascript">
    $(".like").click(function () {
        var newsId = $(this).html;
        alert(newsId);
        //$.post("/Manage/LikeNews", { id: newsId }, function (result) {
        //    if (result != null) {
        //        $("html").html(result);
        //    }
        //    else {
        //        alert("fail");
        //    }
        //});
        //if (!$(this).hasClass("curr-user")) {
        //    var rowClass = "selected-row";
        //    if ($(this).hasClass(rowClass)) {
        //        $(this).removeClass(rowClass);
        //        ids.splice(ids.indexOf($(this).attr("id")), 1);
        //    }
        //    else {
        //        $(this).addClass(rowClass);
        //        ids.push($(this).attr("id"));
        //    }
        //}
    })
    </script>